<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Web</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Calculadora Web</h1>
        
        <form id="calculadoraForm">
            <div class="form-group">
                <label for="a">Valor A:</label>
                <input type="number" id="a" name="a" step="any" required>
            </div>

            <div class="form-group">
                <label for="b">Valor B:</label>
                <input type="number" id="b" name="b" step="any" required>
            </div>

            <div class="form-group">
                <label>Operación:</label>
                <div class="operaciones">
                    <label>
                        <input type="radio" name="operacion" value="sumar" checked>
                        Sumar
                    </label>
                    <label>
                        <input type="radio" name="operacion" value="restar">
                        Restar
                    </label>
                    <label>
                        <input type="radio" name="operacion" value="multiplicar">
                        Multiplicar
                    </label>
                    <label>
                        <input type="radio" name="operacion" value="dividir">
                        Dividir
                    </label>
                </div>
            </div>

            <button type="submit" class="btn-calcular">Calcular</button>
        </form>

        <div id="resultado" class="resultado"></div>
    </div>

    <script>
        document.getElementById('calculadoraForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const data = {
                a: formData.get('a'),
                b: formData.get('b'),
                operacion: formData.get('operacion')
            };

            try {
                const response = await fetch('/calcular', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();
                mostrarResultado(result);

            } catch (error) {
                mostrarError('Error al conectar con el servidor');
            }
        });

        function mostrarResultado(data) {
            const resultadoDiv = document.getElementById('resultado');
            
            if (data.success) {
                resultadoDiv.innerHTML = `
                    <div class="resultado-exito">
                        <h3>Resultado:</h3>
                        <p>${data.a} ${getSimboloOperacion(data.operacion)} ${data.b} = <strong>${data.resultado}</strong></p>
                    </div>
                `;
            } else {
                resultadoDiv.innerHTML = `
                    <div class="resultado-error">
                        <h3>Error:</h3>
                        <p>${data.error}</p>
                    </div>
                `;
            }
        }

        function mostrarError(mensaje) {
            const resultadoDiv = document.getElementById('resultado');
            resultadoDiv.innerHTML = `
                <div class="resultado-error">
                    <h3>Error:</h3>
                    <p>${mensaje}</p>
                </div>
            `;
        }

        function getSimboloOperacion(operacion) {
            switch(operacion.toLowerCase()) {
                case 'suma': return '+';
                case 'resta': return '-';
                case 'multiplicación': return '×';
                case 'división': return '÷';
                default: return '?';
            }
        }
    </script>
</body>
</html>